* { box-sizing: border-box; }
:root { color-scheme: light dark; --bg:#0f1115; --panel:#151823; --muted:#8b94a7; --text:#e7eaf0; --accent:#ff496a; --border:#23283a; }
html, body { margin:0; padding:0; background:var(--bg); color:var(--text); font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; }
a { color: var(--accent); text-decoration: none; }
a:hover { text-decoration: underline; }

.site-header { position: sticky; top:0; z-index: 10; display:flex; gap:12px; align-items:center; padding:12px 16px; background:rgba(15,17,21,0.9); backdrop-filter: blur(6px); border-bottom:1px solid var(--border); }
.brand { font-weight: 800; font-size: 18px; cursor: pointer; white-space: nowrap; display:flex; align-items:center; gap:8px; }
.brand-logo { width:28px; height:28px; border-radius:6px; object-fit:cover; border:1px solid var(--border); background:#0b0d12; }
.search-form { display:flex; gap:8px; flex:1; }
.search-form input { flex:1; padding:10px 12px; border-radius: 8px; border:1px solid var(--border); background: var(--panel); color: var(--text); }
.search-form button { padding:10px 14px; border-radius:8px; border:1px solid var(--border); background: var(--accent); color:#111; font-weight:700; cursor:pointer; }
.genre-select-wrap select { padding:10px 12px; border-radius:8px; border:1px solid var(--border); background: var(--panel); color: var(--text); }

.app { padding: 18px 16px; max-width: 1200px; margin: 0 auto; }

.grid { display:grid; grid-template-columns: repeat(2, 1fr); gap:14px; }
@media (min-width: 640px) { .grid { grid-template-columns: repeat(3, 1fr); } }
@media (min-width: 900px) { .grid { grid-template-columns: repeat(5, 1fr); } }
@media (max-width: 420px) { .grid { grid-template-columns: 1fr; } }

.card { background: var(--panel); border:1px solid var(--border); border-radius:12px; overflow:hidden; display:flex; flex-direction:column; }
.card img { width:100%; aspect-ratio: 3/4; object-fit: cover; background:#0b0d12; }
.card .content { padding:10px; display:flex; flex-direction:column; gap:6px; }
.card .title { font-weight:700; font-size: 14px; line-height: 1.2; }
.card .desc { color: var(--muted); font-size:12px; max-height: 3.4em; overflow: hidden; }
.card .meta { color: var(--muted); font-size: 12px; }

.section-title { font-weight:800; font-size:22px; margin: 8px 0 14px; }
.toolbar { display:flex; align-items:center; justify-content: space-between; gap:10px; margin: 8px 0 14px; }
.toolbar .section-title { flex: 1; }
.toolbar .pager { flex-shrink: 0; }
@media (max-width: 640px) {
  .toolbar { flex-wrap: wrap; }
  .toolbar .pager { width: 100%; justify-content: space-between; }
}
.button, .pager button { padding:8px 12px; border-radius:8px; border:1px solid var(--border); background: var(--panel); color:var(--text); cursor:pointer; }
.button.primary { background: var(--accent); color:#111; border-color: #000; font-weight:800; }

.pager { display:flex; gap:8px; align-items:center; }
.pager .page { color: var(--muted); font-size: 12px; }

.detail { display:grid; gap:16px; grid-template-columns: 1fr; }
@media (min-width: 900px) { .detail { grid-template-columns: 280px 1fr; } }
.detail .cover { width:100%; border-radius:12px; border:1px solid var(--border); background:#0b0d12; }
.detail .info { display:flex; flex-direction:column; gap:10px; }
.detail .chips { display:flex; flex-wrap: wrap; gap:6px; }
.detail .chip { font-size: 12px; padding:4px 8px; border-radius: 999px; background: #1b2030; border:1px solid var(--border); color: var(--muted); }
.detail .chapters { margin-top: 6px; display:grid; gap:8px; grid-template-columns: repeat(2, 1fr); }
@media (min-width: 768px) { .detail .chapters { grid-template-columns: repeat(4, 1fr); } }
.chapter-link { padding:8px; border-radius:10px; border:1px solid var(--border); background: var(--panel); color: var(--text); text-align:center; }

.reader { display:flex; flex-direction:column; gap:8px; }
.reader .reader-toolbar { position: sticky; top:52px; z-index:5; display:flex; gap:8px; padding:8px; background: rgba(15,17,21,0.9); border:1px solid var(--border); border-radius:10px; }
.reader img { width: 100%; height: auto; border-radius: 8px; background:#0b0d12; }
@media (max-width: 640px) {
  .reader .reader-toolbar { top: 60px; flex-wrap: wrap; justify-content: center; }
}

.loading { display:flex; align-items:center; justify-content:center; padding: 40px 0; color: var(--muted); }
.loading .spinner { width: 20px; height: 20px; border:3px solid rgba(255,255,255,0.2); border-top-color: var(--accent); border-radius:50%; margin-right:8px; animation: spin 0.8s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }
.error { color: #ff6b6b; background: #311; border:1px solid #522; padding:10px; border-radius:8px; }

.site-footer { padding:18px 16px; text-align:center; color: var(--muted); border-top:1px solid var(--border); }

/* Mobile header layout */
@media (max-width: 640px) {
  .site-header { flex-wrap: wrap; gap: 10px; padding: 10px 12px; }
  .brand { font-size: 16px; order: 1; width: 100%; }
  /* Row 2: Genre + Bookmarks side-by-side */
  .genre-select-wrap { order: 2; flex: 1 1 48%; min-width: 0; }
  .site-header > .button { order: 3; flex: 1 1 48%; margin-left: 0; text-align: center; }
  /* Row 3: Search alone full width */
  .search-form { order: 4; width: 100%; }
  .section-title { font-size: 18px; }
  .app { padding: 14px 12px; }
  .button, .pager button { padding: 10px 12px; }
}
